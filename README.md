
# 콘킾 (ConKeep) - 스마트 기프티콘 관리 서비스

## 📱 서비스 소개

콘킾(ConKeep)은 AI 기반의 모바일 기프티콘 관리 및 공유 서비스입니다. 기프티콘 이미지를 업로드하면 자동으로 바코드를 인식하고, Google Gemini Vision API를 통해 브랜드, 상품명, 유효기간, 금액을 추출하여 체계적으로 관리할 수 있습니다.

## 😓 알려진 문제
### 바코드 인식 고장


## 🔗 배포 URL
### https://con-keep.lovable.app/

## 👩‍👧 페르소나 (Persona)

| 분류 | **김은혜 – “쿠폰 정리왕”** | **최연우 – “가족 공유왕”**                        | **최하나 – “연우의 딸”** |
|------|---------------------------|-------------------------------------------|-------------------------|
| 나이 / 직업 | 25세, 대학교 4학년 | 40세, 회사원                                  | 24세, 대학교 3학년 |
| 기술 숙련도 | 모바일·앱 활용 **상** | 필수 기능만 사용 **중**                           | 모바일 SNS·웹 사용 **상** |
| 주요 목표 | • 기프티콘 **만료 전 100 % 사용**<br>• 브랜드별 **카테고리 정리** | • 가족에게 **간편 공유**<br>• **중복 사용 방지**        | • **가족에게 전달받은 쿠폰**을 손쉽게 사용하고 **사용 사실**을 즉시 반영 |
| 니즈 | • 자동 스캔·정보 입력<br>• D-3 / D-1 **푸시 알림** | • **로그인 없이** 링크 공유<br>• 실시간 **사용 완료 동기화** | • 링크 한 번으로 쿠폰 확인<br>• 결제 직후 **사용 완료** 처리 & 반영 |
| 페인포인트 | • 갤러리에 흩어진 쿠폰<br>• 만료일 자주 **놓침** | • 이미지로 쿠폰 공유 시 **중복 사용** 위험               | • 링크를 열면 앱 설치·회원가입 요구<br>• **사용 완료**를 눌러도 연우의 앱에 미반영 |

---

## 🗒️ 사용자 시나리오 (Scenario)

### 김은혜 – “쿠폰 정리왕”
1. 받은 기프티콘 12장을 갤러리에 전부 저장한다.
2. ConKeep이 **바코드·OCR**로 정보를 자동 입력 후 저장한다.
3. 쿠폰 만료 3일전 **D-3 알림**을 받고 쿠폰을 사용한다.
4. 상세 화면에서 **‘사용 완료’** 토글 → 대시보드 카드가 즉시 회색 처리된다.

### 최연우 – “가족 공유왕”
1. 별다방 아메리카노 쿠폰을 등록하고 **“공유”** 버튼을 누른다.
2. 생성된 **링크**를 카카오톡으로 딸(최하나)에게 전송한다.
3. 딸이 링크 페이지에서 **‘사용 완료’**를 선택한다.
4. 연우의 대시보드가 **실시간**으로 ‘사용 완료’ 상태로 갱신된다.

### 최하나 – “연우의 딸”
1. 엄마(연우)가 보내준 ConKeep **공유 링크**를 카카오톡으로 받는다.
2. 링크를 탭하면 **로그인 없이** 쿠폰 이미지·만료일·바코드가 표시된다.
3. 카페에서 바코드를 스캔받아 결제한다.
4. 즉시 **‘사용 완료’** 토글을 켜고 “사용 처리되었습니다” 토스트를 확인한다.
5. 1 초 이내로 연우의 ConKeep 대시보드가 **‘사용 완료’**로 동기화된다.

---

## ✅ 사용자 스토리 & 인수 조건

| # | 사용자 스토리 (As / I want / So that) | **Given** | **When** | **Then**                                                                     |
|---|----------------------------------------|-----------|----------|------------------------------------------------------------------------------|
| S-1 | **“기프티콘 수집가로서, 만료 알림을 받아 기한 내 사용하고 싶다.”** | 사용자가 쿠폰을 저장하고 **알림**을 허용했다. | 쿠폰 만료일이 **D-3 또는 D-1**이 된다. | **푸시 알림**이 수신된다.                                                             |
| S-2 | **“가족 공유 사용자로서, 중복 사용을 막기 위해 실시간 동기화를 원한다.”** | 공유 링크 접속자가 **‘사용 완료’**를 토글한다. | Broadcast 메시지가 전송된다. | 원본 대시보드 카드가 **‘사용 완료’**로 변한다.                                                |
| S-3 | **“링크 수령 참여자로서, 로그인 없이 쿠폰을 확인·사용 완료 처리하고 싶다.”** | 카카오톡으로 받은 ConKeep **공유 URL**을 탭했다. | 쿠폰 사용 후 **‘사용 완료’**를 켠다. | • 토글이 회색으로 고정<br>• “사용 처리되었습니다” 토스트 노출<br>• 연우의 대시보드가 **실시간 ‘사용 완료’**로 갱신된다. |
| S-4 | **“초보 사용자로서, 사진 한 장으로 쿠폰 정보를 자동 완성하고 싶다.”** | 사용자가 이미지 파일을 선택한다. | ZXing / Gemini Vision이 인식에 **성공**한다. | 브랜드·상품명·금액·만료일이 **자동 입력**된다.                                                 |
| S-5 | **“모든 사용자로서, 오프라인에서도 쿠폰을 열람하고 싶다.”** | 기기가 **비행기 모드**다. | 사용자가 대시보드를 새로고침한다. | 로컬DB에서 쿠폰·이미지가 **오프라인**으로 로드된다.                                              |

---


### ✨ 주요 기능

- **🤖 AI 자동 인식**: Google Gemini Vision API로 쿠폰 정보 자동 추출
- **📱 바코드 스캔**: ZXing-js 라이브러리를 통한 바코드/QR 코드 인식
- **💾 로컬 저장**: IndexedDB를 활용한 안전한 로컬 데이터 저장
- **🔔 만료 알림**: D-7, D-1일 푸시 알림으로 만료 방지
- **🔗 실시간 공유**: BroadcastChannel API를 통한 즉시 동기화
- **🎨 모바일 최적화**: 360×640 기준 반응형 디자인
- **🌙 다크모드**: 자동 테마 전환 지원
- **🔒 보안**: API 키 암호화 저장

## 🚀 설치 및 사용 방법

### 1. 프로젝트 다운로드
```bash
# Git clone 또는 파일 다운로드 후
cd con-keep-mock
```

### 2. 의존성 설치
```bash
npm install
```

### 3. 프로젝트 빌드
```bash
npm run build
```

### 4. 웹 서버 실행
빌드가 완료되면 `dist` 디렉토리가 생성됩니다. 이 디렉토리에서 웹 서버를 실행하세요.

```bash
# dist 디렉토리로 이동
cd dist

# Python 사용 (권장)
python -m http.server 8000

# 또는 Node.js serve 사용
npx serve .

# 또는 PHP 사용
php -S localhost:8000
```

### 5. 브라우저에서 접속
웹 서버 실행 후, 터미널에 표시되는 주소(예: `http://localhost:8000`)로 접속하세요.

### 6. Google Gemini API 키 설정
1. [Google AI Studio](https://makersuite.google.com/app/apikey)에서 API 키 발급
2. 앱 설정에서 API 키 입력 및 저장
3. AI 기능 활성화 완료

## 📂 파일 구조

```
/
├── public/              # 정적 에셋 폴더
├── src/                 # 소스 코드 폴더
│   ├── components/      # React 컴포넌트
│   ├── pages/           # 페이지 컴포넌트
│   ├── App.tsx          # 메인 앱 컴포넌트
│   └── main.tsx         # 애플리케이션 진입점
├── package.json         # 프로젝트 의존성 및 스크립트
├── vite.config.ts       # Vite 설정 파일
├── tsconfig.json        # TypeScript 설정 파일
└── README.md            # 프로젝트 문서
```

## 🛠 기술 스택

- **Frontend**: React, TypeScript, Vite, Tailwind CSS
- **UI Components**: shadcn/ui, Radix UI
- **AI Vision**: Google Gemini Vision API
- **Barcode**: ZXing-js Library
- **Storage**: IndexedDB
- **Communication**: BroadcastChannel API
- **Notifications**: Web Notification API

## 📋 사용자 시나리오

### 1. 선물 관리
- 생일에 받은 여러 브랜드 기프티콘을 한꺼번에 등록
- AI가 자동으로 브랜드, 상품명, 유효기간 인식
- 만료일 기준으로 정렬된 대시보드에서 한눈에 확인

### 2. 만료 방지
- D-7, D-1일 푸시 알림으로 사용 리마인드
- 사용 완료 체크로 중복 사용 방지
- 만료 임박 쿠폰 별도 표시

### 3. 가족 공유
- 공유 링크 생성으로 가족과 쿠폰 공유
- 실시간 사용 상태 동기화
- QR 코드를 통한 간편 공유

### 4. 이벤트 경품
- 온라인 행사 경품 쿠폰 즉시 등록
- 바코드 스캔으로 빠른 인식
- 사용 시점까지 안전한 보관

## 🧪 테스트 시나리오

| # | 테스트 케이스 | 기대 결과 |
|---|---------------|-----------|
| 1 | 해상도 200dpi 흐릿한 바코드 업로드 | 스캔 성공률 70% 이상 |
| 2 | QR 코드 + 흰 배경/그림자 이미지 | 인식 정확도 95% 이상 |
| 3 | 만료일이 지난 쿠폰 등록 | 카드에 '만료' 상태 표시, 알림 제외 |
| 4 | API 키 미입력 상태에서 등록 시도 | 'API 키 필요' 모달 표시 |
| 5 | 공유 링크 접속 후 '사용 완료' 토글 | 원본 탭 상태 즉시 동기화 |
| 6 | 오프라인 상태에서 대시보드 접근 | 저장된 쿠폰 목록 정상 로드 |
| 7 | 푸시 알림 권한 거부 상태 | 앱 내부 배너 알림으로 대체 |
| 8 | 50장 대량 쿠폰 업로드 | 3초 이내 렌더링, 스크롤 60fps |
| 9 | 동일 바코드 중복 등록 시도 | '이미 존재하는 바코드' 경고 |
| 10 | API 오류(429 등) 발생 시 | 수동 입력 폼으로 전환 |

## ⚙️ 설정 옵션

### 알림 설정
- 만료 알림 ON/OFF
- 7일 전 알림 설정
- 1일 전 알림 설정

### 데이터 관리
- 데이터 내보내기 (JSON 형식)
- 전체 데이터 삭제
- API 키 관리

### 테마 설정
- 라이트/다크 모드 자동 감지
- 수동 테마 전환 지원

## 🔒 보안 및 개인정보

- **로컬 저장**: 모든 데이터는 사용자 기기에만 저장됩니다
- **API 키 암호화**: Crypto API를 통한 API 키 암호화 저장
- **개인정보 없음**: 서버로 개인정보 전송하지 않음
- **오프라인 동작**: 인터넷 연결 없이도 기본 기능 사용 가능

## 📱 PWA 지원

- 홈 화면에 추가 가능
- 오프라인 모드 지원
- 네이티브 앱과 유사한 UX

## 🐛 알려진 이슈 (Known Issues)

1. **iOS Safari 제한사항**
   - 파일 업로드 시 `capture` 속성 일부 제한
   - 해결: 수동 카메라 앱 사용 후 업로드

2. **구형 브라우저 호환성**
   - ES6+ 기능 사용으로 IE 미지원
   - 해결: Chrome, Firefox, Safari 최신 버전 사용 권장

3. **대용량 이미지 처리**
   - 10MB 이상 이미지 처리 속도 저하
   - 해결: 자동 WebP 압축 적용

## 🔄 업데이트 계획 (TODO)

- [ ] 카테고리별 쿠폰 분류 기능
- [ ] 사용 내역 통계 및 분석
- [ ] 쿠폰 교환/거래 기능
- [ ] 브랜드별 할인 정보 연동
- [ ] 가계부 연동 기능
- [ ] 다국어 지원 (영어, 일본어)

## 📞 지원 및 문의

- **GitHub Issues**: 버그 리포트 및 기능 요청
- **Email**: [개발자 이메일]
- **버전**: v1.0.0
- **최종 업데이트**: 2024-01-01

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능합니다.

---

> 💡 **팁**: 최상의 경험을 위해 최신 버전의 Chrome 또는 Safari 브라우저를 사용하세요!
